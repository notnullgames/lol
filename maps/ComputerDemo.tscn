[gd_scene load_steps=7 format=2]

[ext_resource path="res://maps/Terminal.tscn" type="PackedScene" id=1]
[ext_resource path="res://tiles/images/cyber-Interior-Furniture.png" type="Texture" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

# toggle G on/off
const code = \"\"\"S G 01
S G 00
J 0
\"\"\"

# connect light to G
func _on_Terminal_set_register(register, value):
	if register == \"G\":
		if value:
			$Terminal/Light.play(\"on\")
		else:
			$Terminal/Light.play(\"off\")

func _ready():
	# set initial code
	$Terminal.emit_signal(\"set_code\", code)
	
	# start the computer
	$Terminal.emit_signal(\"set_running\", true)
"

[sub_resource type="AtlasTexture" id=2]
atlas = ExtResource( 2 )
region = Rect2( 352, 320, 32, 32 )

[sub_resource type="AtlasTexture" id=3]
atlas = ExtResource( 2 )
region = Rect2( 352, 288, 32, 32 )

[sub_resource type="SpriteFrames" id=4]
animations = [ {
"frames": [ SubResource( 2 ) ],
"loop": true,
"name": "on",
"speed": 5.0
}, {
"frames": [ SubResource( 3 ) ],
"loop": true,
"name": "off",
"speed": 5.0
} ]

[node name="ComputerDemo" type="Node2D"]
script = SubResource( 1 )

[node name="Terminal" parent="." instance=ExtResource( 1 )]

[node name="Light" type="AnimatedSprite" parent="Terminal"]
position = Vector2( 303.662, 166.097 )
frames = SubResource( 4 )
animation = "off"
playing = true
[connection signal="set_register" from="Terminal" to="." method="_on_Terminal_set_register"]
